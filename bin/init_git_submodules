#!/bin/bash

set -euo pipefail

#allow init of submodule by using github token instead of ssh key

GIT_SUB_MODULE=$1
sed -i "s|git@github.com:SonarSource/|https://${GITHUB_TOKEN}@github.com/SonarSource/|g" .gitmodules
git submodule update --init --depth 1 "${GIT_SUB_MODULE}"
